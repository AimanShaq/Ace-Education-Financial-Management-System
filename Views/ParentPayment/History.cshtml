@model IEnumerable<Ace_Tuition_WBL.Models.tbReceipt>

@{
    Layout = "~/Views/Shared/_LayoutParent.cshtml";
}

<div class="card">
    <div class="card-header">
        <h3 class="card-title">Payment History</h3>
    </div>
    <!-- /.card-header -->
    <div class="card-body">
        <table id="example1" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Receipt ID</th>
                    <th>Bill Date</th>
                    <th>Student Name</th>
                    <th>Receipt Total</th>
                    <th>Payment Proof</th>
                    <th>Receipt Status</th>
                    <th>Manage</th>
                </tr>
            </thead>
            
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @item.ReceiptID
                        </td>
                        <td>
                            @String.Format("{0:dd/MM/yyyy}", item.BillDate)
                        </td>
                        <td>
                            @item.tbStudent.StudentName
                        </td>
                        <td>
                            RM @String.Format("{0:0.00}", item.ReceiptTotal)
                        </td>
                        <td>
                            @*<img src=@Url.Content(@item.ReceiptProof) style="width:50px;height:50px;" class="center" />*@
                            @if (item.ReceiptProof is null)
                            {
                                <p style="color:red">No file have been uploaded</p>
                            }
                            else
                            {
                                <a href="@Url.Content(item.ReceiptProof)" download> Download Proof</a>
                            }
                        </td>
                        <td>
                            @if (item.ReceiptStatus == 0)
                            {
                                <p style="color:orange;">Outstanding</p>
                            }
                            else if (item.ReceiptStatus == 1)
                            {
                                <p style="color:darkblue">Pending Approval</p>
                            }
                            else if (item.ReceiptStatus == 2)
                            {
                                <p style="color:forestgreen">Accepted</p>
                            }
                            else
                            {
                                <p style="color:darkred">Rejected</p>
                            }

                        </td>
                        <td>
                            @*@Html.ActionLink("Upload Proof", "Edit", new { id = item.ReceiptID }, new { @class = "btn btn-warning" })*@
                            &nbsp;
                            @Html.ActionLink("Details", "HistoryDetails", new { id = item.ReceiptID }, new { @class = "btn btn-info" })
                        </td>
                    </tr>
                }
            </tbody>
            
        </table>
    </div>
</div>